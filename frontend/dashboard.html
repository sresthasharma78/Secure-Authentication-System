<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <style>
        body {
            font-family: Arial;
            background: #eef3ff;
            margin: 0;
            padding: 0;
        }
        .navbar {
            background: #007bff;
            color: white;
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .container {
            padding: 25px;
        }
        button {
            padding: 8px 14px;
            background: #ff4d4d;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background: #d93636;
        }
    </style>
</head>
<body>

    <div class="navbar">
        <span id="welcome"></span>
        <button onclick="logout()">Logout</button>
    </div>

    <div class="container">
        <h2>Your Secure Dashboard</h2>
        <p>This page is protected. Only logged-in users can see this.</p>
    </div>

<script>
(function checkAuth() {
    const token = localStorage.getItem("authToken");
    if (!token) {
        // No token â†’ force login
        window.location.href = "login.html";
        return;
    }

    // Optional: Fetch profile from backend
    fetch("http://127.0.0.1:5000/profile", {
        headers: {
            "Authorization": token
        }
    })
    .then(res => res.json())
    .then(data => {
        if (data.error) {
            // Token invalid or expired
            localStorage.removeItem("authToken");
            window.location.href = "login.html";
        } else {
            document.getElementById("welcome").textContent =
                "Logged in as: " + data.email;
        }
    });
})();

function logout() {
    localStorage.removeItem("authToken");
    window.location.href = "login.html";
}
</script>

</body>
</html>
